<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🔥 Free Fire UID Tracker</title>
  <link rel="stylesheet" href="style.css">
  <script>
    async function trackUID(event) {
      event.preventDefault();
      let uid = document.querySelector("input[name='uid']").value;
      if (!uid) return;

      let res = await fetch("https://gagan-info-v1.vercel.app/info?uid=" + uid);
      let info = await res.json();
      let player = info.playerData;
      let guild = info.guildInfo;
      let pet = info.petInfo;

      // Dates
      let createAt = player.createAt ? new Date(parseInt(player.createAt) * 1000) : "N/A";
      let lastLogin = player.lastLoginAt ? new Date(parseInt(player.lastLoginAt) * 1000) : "N/A";
      let now = new Date();
      let diff = (player.lastLoginAt) ? Math.floor((now - lastLogin) / 1000) : null;

      // Online status
      let status = "N/A";
      if (diff !== null) {
        status = (diff <= 300) ? "🟢 Online" : 
          `🔴 Offline (${diff >= 86400 ? Math.floor(diff/86400) + "d " : ""}${Math.floor((diff % 86400)/3600)}h ${Math.floor((diff % 3600)/60)}m ago)`;
      }

      // UI Cards
      document.querySelector("#result").innerHTML = `
        <div class="card player-card">
          <h2>${player.nickname} <span class="level">Lvl ${player.level}</span></h2>
          <p><b>UID:</b> ${player.accountId}</p>
          <p><b>Region:</b> ${player.region}</p>
          <p><b>Status:</b> <span class="status">${status}</span></p>
        </div>

        <div class="card stats-card">
          <h3>📊 Player Stats</h3>
          <div class="stats-grid">
            <div><b>Experience</b><br>${player.exp}</div>
            <div><b>Rank Points</b><br>${player.rankingPoints}</div>
            <div><b>Rank</b><br>${player.rank}</div>
            <div><b>CS Rank</b><br>${player.csRank}</div>
          </div>
        </div>

        <div class="card guild-card">
          <h3>🏆 Guild Info</h3>
          ${guild ? `
            <p><b>Clan:</b> ${guild.clanName} (Lvl ${guild.clanLevel})</p>
            <p><b>Members:</b> ${guild.memberNum}/${guild.capacity}</p>
          ` : "<p>No guild data</p>"}
        </div>

        <div class="card pet-card">
          <h3>🐾 Pet Info</h3>
          ${pet ? `
            <p><b>Pet ID:</b> ${pet.id}</p>
            <p><b>Level:</b> ${pet.level}</p>
            <p><b>Exp:</b> ${pet.exp}</p>
          ` : "<p>No pet data</p>"}
        </div>
      `;

      // Auto-refresh every 1 min
      setTimeout(() => trackUID(event), 60000);
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>🔥 Free Fire UID Tracker</h1>
    <form onsubmit="trackUID(event)">
      <input type="text" name="uid" placeholder="Enter Free Fire UID" required>
      <button type="submit">Track</button>
    </form>
    <div id="result"></div>
  </div>
</body>
</html>
